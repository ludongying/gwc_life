<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>文件预览</title>
    <link rel="stylesheet" href="/common/css/style.css"/>
    <link rel="stylesheet" href="/common/css/pdfh5.css"/>
    <style>
        html,
        body {
            width: 100%;
            height: 100%;
        }

        #demo {
            display: none;
            /* height: 50%; */
        }
    </style>
</head>
<body>
<div id="app">
    <div class="text-wrapper">
        <div class="text part1">
            <div>
                <span class="letter">
                    <div class="character">L</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">o</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">a</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">d</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">i</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">n</div> <span></span>
                </span>
                <span class="letter">
                    <div class="character">g</div> <span></span>
                </span>
            </div>
        </div>
        <div class="how-to"><span>正在加载中，请您耐心等待...</span></div>
    </div>

</div>

<div id="demo"></div>
<input type="text" id="path" value="${path}">
<script type="text/javascript" src="/common/js/pdf.js"></script>
<script type="text/javascript" src="/common/js/pdf.worker.js"></script>
<script type="text/javascript" src="/common/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/common/js/pdfh5.js"></script>
<script type="text/javascript">
    $(function () {
        // var curWwwPath = window.location.href;
        // var pathName = window.location.pathname;
        // var local = curWwwPath.substring(0, curWwwPath.indexOf(pathName));// 获取主机地址,如： http://localhost:8080
        // var filePath = getUrlParam('filePath');
        let filePath=$("path")
        $("#app").remove();
        $("#demo").show();
        //当前默认优先获取浏览器地址栏？file=后面的地址，如果地址栏没有，再拿配置项的pdfurl或者data来渲染pdf
        //优先顺序：  ？file= > pdfurl > data
        var pdfh5 = new Pdfh5('#demo', {
            pdfurl: local + "/gwcApi/reviewFile/previewFileDownLoad?filePath=" + filePath,
            // limit:2, // 限制加载最大页数
            renderType: "canvas",
            // type:"ajax",
            lazy: true
        });

    //     pdfh5.on("ready", function () {
    //         console.log("总页数：" + this.totalNum)
    //     });
    //     //监听pdf渲染过程，currentPageDom当前加载的pdf的dom,currentNum当前加载的pdf页数,
    //     pdfh5.on("render", function (currentNum, time, currentPageDom) {
    //         console.log("当前渲染页：" + currentNum + "，耗时：" + time + "毫秒")
    //     });
    //     //监听完成事件，加载失败、渲染成功都会触发
    //     pdfh5.on("complete", function (status, msg, time) {
    //         console.log("状态：" + status + "，信息：" + msg + "，耗时：" + time + "毫秒，总页数：" + this.totalNum)
    //     });
    //     //监听pdf渲染成功
    //     pdfh5.on("success", function (time) {
    //         console.log("加载完成，耗时" + time + "毫秒")
    //     })
    });
    //
    //
    // function getUrlParam(name) {
    //     var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
    //     var r = window.location.search.substr(1).match(reg);  //匹配目标参数
    //     if (r != null) return decodeURI(r[2]);
    //     return null; //返回参数值
    // }
</script>
</body>
</html>